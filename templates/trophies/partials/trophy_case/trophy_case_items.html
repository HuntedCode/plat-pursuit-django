{% load static custom_filters %}
{% for platinum in platinums %}
{% with platinum.trophy as trophy %}
    {% if request.user == profile.user %}
        <a class="card bg-base-100 border-4 border-base-300 rounded-box shadow-lg shadow-neutral hover:scale-105 cursor-pointer {% if platinum.id in selected_ids %}border-primary shadow-primary scale-103 selected{% endif %}" data-id="{{ platinum.id }}">
    {% else %}
        <a href="{% url 'game_detail_with_profile' trophy.game.np_communication_id profile.psn_username %}" class="card bg-base-100 border-4 border-base-300 rounded-box shadow-lg shadow-neutral hover:scale-105 cursor-pointer {% if platinum.id in selected_ids %}border-secondary shadow-secondary scale-103{% endif %}">
    {% endif %}
        <div class="card-body p-2">
            <div class="flex flex-row self-end gap-1 mr-1">
                {% for platform in trophy.game.title_platform reversed %}
                <div class="badge badge-xs badge-ghost font-bold text-xs border-2 border-{{ platform|platform_color_str }} rounded-box hover:scale-105">{{ platform }}</div>
                {% endfor %}
                {% if trophy.game.is_regional %}
                    <div class="flex flex-row gap-2">
                        {% for region in trophy.game.region %}
                            {% if region == "NA" %}
                                <div class="badge badge-xs badge-primary font-bold italic hover:scale-105">NA</div>
                            {% elif region == "EU" %}
                                <div class="badge badge-xs badge-secondary font-bold italic hover:scale-105">EU</div>
                            {% elif region == "JP" %}
                                <div class="badge badge-xs badge-accent font-bold italic hover:scale-105">JP</div>
                            {% else %}
                                <div class="badge badge-xs badge-warning font-bold italic hover:scale-105">AS</div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="badge badge-xs badge-ghost font-bold italic hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"  viewBox="0 0 512 512" stroke="var(--color-success)" fill="var(--color-success)"><path d="M351.9 280l-190.9 0c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zM160.9 232l190.9 0C349 167.5 334.7 108.1 314.4 64.6 303 40.2 290.7 22.8 279.3 12.2 268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4zm-48 0C116.4 146.4 138.5 66.9 170.8 14.7 78.7 47.3 10.9 131.2 1.5 232l111.4 0zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3L1.5 280zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3l-111.4 0zm111.4-48C501.9 131.2 434.1 47.3 342 14.7 374.3 66.9 396.4 146.4 399.9 232l111.4 0z"/></svg>
                    </div>
                {% endif %}
            </div>
            <div class="hover-3d z-10">
                <figure class="border-4 border-base-300 rounded-box shadow-md shadow-neutral">
                    <img src="{{ trophy.trophy_icon_url }}" alt="{{ trophy.trophy_name }}" class="w-full aspect-square object-cover" />
                </figure>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="flex flex-row justify-self-center justify-between">
                <div class="flex flex-col gap-0 ml-2">
                    <p class="text-sm text-accent font-bold pr-1 line-clamp-1">{{ trophy.trophy_name }}</p>
                    <p class="text-xs text-primary font-semibold pr-1 line-clamp-1">{{ trophy.game.title_name }}</p>
                    <p class="text-xs text-base-content pr-1 italic line-clamp-1">PSN: {{ trophy.trophy_earn_rate }}% | PP: {{ trophy.earn_rate|multiply:100|floatformat:2 }}%</p>
                    <p class="text-xs text-base-content/70 pr-1 line-clamp-1 italic">Earned: {{ platinum.earned_date_time|format_date:"format_short" }}</p>
                </div>
                <img src="{% static 'images/plat.png' %}" class="w-15 h-15 self-center" />
            </div>
        </div>
    </a>
{% endwith %}
{% endfor %}