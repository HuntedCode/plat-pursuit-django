{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if not is_live %}
    <div class="alert alert-warning text-center font-bold text-sm py-2" role="alert">TEST MODE ACTIVE</div>
{% endif %}
<div class="max-w-6xl mx-auto px-4 md:px-8 py-6 space-y-12">

    <!-- ===== SECTION 1: Hero ===== -->
    <div class="text-center space-y-4">
        <figure class="relative w-40 h-40 mx-auto hover:scale-105 transition-transform">
            <img src="{% static 'images/badges/backdrops/3_backdrop.png' %}" alt="Badge backdrop" class="w-full absolute top-0 left-0" loading="lazy" decoding="async" />
            <img src="{% static 'images/badges/default.png' %}" alt="Default badge" class="w-full absolute top-0 left-0" loading="lazy" decoding="async" />
        </figure>
        <span class="text-rotate duration-[40000ms] text-lg lg:text-xl xl:text-2xl 2xl:text-3xl font-bold text-center leading-[2] italic self-center">
            <span class="justify-items-center">
                <span class="pr-2">"Got some rare things on sale, Stranger..."</span>
                <span class="pr-2">"Trouble with the trolley, eh?"</span>
                <span class="pr-2">"What are ya buyin'?"</span>
                <span class="pr-2">"There are many surprises within my store..."</span>
                <span class="pr-2">"Khajiit has wares if you have coins."</span>
                <span class="pr-2">"ENCHANTMENT?!"</span>
                <span class="pr-2">"Boy."</span>
                <span class="pr-2">"Stay a while and listen."</span>
                <span class="pr-2">"Would you kindly?"</span>
                <span class="pr-2">"War. War never changes."</span>
            </span>
        </span>
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold">Your <span class="text-primary">Subscription</span></h1>
        <p class="text-base-content/70 text-sm md:text-base lg:text-lg max-w-2xl mx-auto">Manage your plan, view your perks, and keep your trophy pursuit going strong.</p>
    </div>

    {% if subscription_provider %}

    {% if payment_past_due %}
    <!-- ===== PAYMENT PAST DUE WARNING ===== -->
    <div class="flex justify-center">
        <div class="alert alert-warning max-w-lg shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            <div>
                <h3 class="font-bold">Payment Issue</h3>
                <p class="text-sm">Your most recent payment didn't go through. We're still retrying, but please update your payment method to avoid losing premium access.</p>
            </div>
            {% if portal_url %}
            <a href="{{ portal_url }}" class="btn btn-sm btn-warning">Update Payment</a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- ===== SECTION 2: Subscription Status (Active Subscriber) ===== -->
    <div class="flex justify-center">
        <div class="card bg-base-200/60 w-full max-w-lg {% if premium_tier_slug == 'supporter' %}shimmer{% else %}card-interactive{% endif %}">
            <div class="card-body items-center text-center gap-4">
                <!-- Tier icon -->
                {% if premium_tier_slug == 'ad_free' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
                {% elif premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="{% if premium_tier_slug == 'premium_monthly' %}var(--color-secondary){% else %}var(--color-accent){% endif %}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                {% elif premium_tier_slug == 'supporter' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"/><path d="m18 15-2-2"/><path d="m15 18-2-2"/></svg>
                {% endif %}

                <h2 class="card-title text-2xl {% if premium_tier_slug == 'ad_free' %}text-primary{% elif premium_tier_slug == 'premium_monthly' %}text-secondary{% elif premium_tier_slug == 'premium_yearly' %}text-accent{% elif premium_tier_slug == 'supporter' %}text-warning{% endif %}">
                    {% if premium_tier_slug == 'supporter' %}<span class="legendary-title">{{ tier }}</span>{% else %}{{ tier }}{% endif %}
                </h2>

                <div class="flex flex-wrap items-center justify-center gap-3">
                    <span class="badge badge-success badge-lg gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        {{ status }}
                    </span>
                    <span class="badge badge-outline badge-lg gap-1">
                        via {{ subscription_provider|title }}
                    </span>
                </div>

                <div class="text-sm text-base-content/60">
                    {% if paypal_cancel_at %}
                    <span class="text-warning">Cancels on: <span class="font-semibold">{{ paypal_cancel_at }}</span></span>
                    {% else %}
                    <span>Next billing: <span class="font-semibold text-base-content/80">{{ next_billing }}</span></span>
                    {% endif %}
                </div>

                <div class="divider my-0"></div>

                {% if subscription_provider == 'stripe' and portal_url %}
                <a href="{{ portal_url }}" class="btn btn-primary btn-wide gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                    Manage Billing
                </a>
                {% elif subscription_provider == 'paypal' %}
                <div class="flex flex-col gap-3 w-full items-center">
                    <a href="{{ paypal_manage_url }}" target="_blank" rel="noopener" class="btn btn-primary btn-wide gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.72a.77.77 0 0 1 .757-.65h6.803c2.269 0 3.865.62 4.746 1.842.379.526.618 1.1.718 1.71.104.636.065 1.39-.118 2.304l-.005.023v.06c-.534 3.425-3.078 4.93-5.997 4.93H10.41a.774.774 0 0 0-.764.654l-.902 5.744z"/><path d="M18.429 7.747c-.042.27-.09.546-.147.831-1.073 4.19-4.322 5.716-8.6 5.716H8.109a.95.95 0 0 0-.937.804l-1.15 7.301a.505.505 0 0 0 .499.584h3.505a.77.77 0 0 0 .76-.647l.031-.165.601-3.818.039-.21a.77.77 0 0 1 .76-.648h.48c3.1 0 5.527-1.26 6.236-4.9.296-1.52.143-2.79-.64-3.682a3.068 3.068 0 0 0-.864-.766z"/></svg>
                        Manage on PayPal
                    </a>
                    {% if not paypal_cancel_at %}
                    <form method="post" action="{% url 'paypal_cancel_subscription' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline btn-error btn-wide gap-2"
                                onclick="return confirm('Are you sure you want to cancel your subscription? You will retain access until the end of your current billing period.')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                            Cancel Subscription
                        </button>
                    </form>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- ===== SECTION 3: Your Features ===== -->
    <div class="space-y-6">
        <h2 class="text-2xl md:text-3xl font-bold text-center">What's <span class="text-accent">Included</span></h2>
        <div class="grid grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6">

            <!-- Ad-Free Browsing — all tiers -->
            <div class="card card-interactive card-hover-primary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
                    <h3 class="card-title text-lg">Ad-Free Browsing</h3>
                    <p class="text-sm text-base-content/70">Browse without interruptions. No ads, anywhere on the site. Just you and your trophies.</p>
                </div>
            </div>

            <!-- Lightning Sync — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-primary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    <h3 class="card-title text-lg">Lightning Sync</h3>
                    <p class="text-sm text-base-content/70">Your profile syncs every 5 minutes so your latest trophies show up fast.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    <h3 class="card-title text-lg">Lightning Sync</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium to sync every 5 minutes.</p>
                </div>
            </div>
            {% endif %}

            <!-- Trophy Case — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-secondary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                    <h3 class="card-title text-lg">Trophy Case</h3>
                    <p class="text-sm text-base-content/70">Showcase your proudest platinums front and center on your profile.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                    <h3 class="card-title text-lg">Trophy Case</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium to showcase 10 platinums.</p>
                </div>
            </div>
            {% endif %}

            <!-- Game Lists — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-secondary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2 2 7l10 5 10-5-10-5Z"/><path d="m2 17 10 5 10-5"/><path d="m2 12 10 5 10-5"/></svg>
                    <h3 class="card-title text-lg">Game Lists</h3>
                    <p class="text-sm text-base-content/70">Unlimited lists, public sharing, game notes, and custom themes.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2 2 7l10 5 10-5-10-5Z"/><path d="m2 17 10 5 10-5"/><path d="m2 12 10 5 10-5"/></svg>
                    <h3 class="card-title text-lg">Game Lists</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium for unlimited game lists and more.</p>
                </div>
            </div>
            {% endif %}

            <!-- Profile Customization — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-accent bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="13.5" cy="6.5" r=".5" fill="var(--color-accent)"/><circle cx="17.5" cy="10.5" r=".5" fill="var(--color-accent)"/><circle cx="8.5" cy="7.5" r=".5" fill="var(--color-accent)"/><circle cx="6.5" cy="12.5" r=".5" fill="var(--color-accent)"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></svg>
                    <h3 class="card-title text-lg">Profile Customization</h3>
                    <p class="text-sm text-base-content/70">Custom backgrounds, gradient themes, and display titles earned from badges.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></svg>
                    <h3 class="card-title text-lg">Profile Customization</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium for custom backgrounds and themes.</p>
                </div>
            </div>
            {% endif %}

            <!-- Discord Perks — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-secondary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="var(--color-secondary)" aria-hidden="true"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
                    <h3 class="card-title text-lg">Discord Perks</h3>
                    <p class="text-sm text-base-content/70">Premium role, weekly badge drop votes, and community access.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
                    <h3 class="card-title text-lg">Discord Perks</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium for Discord roles and badge voting.</p>
                </div>
            </div>
            {% endif %}

            <!-- Always Growing — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-accent bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
                    <h3 class="card-title text-lg">Always Growing</h3>
                    <p class="text-sm text-base-content/70">New premium features are added regularly. Your subscription gets better over time.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
                    <h3 class="card-title text-lg">Always Growing</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium for access to new features as they launch.</p>
                </div>
            </div>
            {% endif %}

            <!-- Monthly Recaps History — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-primary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="m9 16 2 2 4-4"/></svg>
                    <h3 class="card-title text-lg">Monthly Recaps History</h3>
                    <p class="text-sm text-base-content/70">Look back on your full trophy journey with detailed monthly recaps.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="m9 16 2 2 4-4"/></svg>
                    <h3 class="card-title text-lg">Monthly Recaps History</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium to unlock your full recap history.</p>
                </div>
            </div>
            {% endif %}

            <!-- Save Checklist Progress — premium tiers only -->
            {% if premium_tier_slug == 'premium_monthly' or premium_tier_slug == 'premium_yearly' or premium_tier_slug == 'supporter' %}
            <div class="card card-interactive card-hover-secondary bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m3 17 2 2 4-4"/><path d="m3 7 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></svg>
                    <h3 class="card-title text-lg">Save Checklist Progress</h3>
                    <p class="text-sm text-base-content/70">Track your progress through trophy guide checklists and pick up where you left off.</p>
                </div>
            </div>
            {% else %}
            <div class="card bg-base-200/60 opacity-40">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        <span class="text-xs font-semibold uppercase tracking-wider">Not included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m3 17 2 2 4-4"/><path d="m3 7 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></svg>
                    <h3 class="card-title text-lg">Save Checklist Progress</h3>
                    <p class="text-sm text-base-content/70">Upgrade to Premium to save your checklist progress.</p>
                </div>
            </div>
            {% endif %}

            <!-- Support PlatPursuit — all tiers -->
            <div class="card card-interactive card-hover-accent bg-base-200/60">
                <div class="card-body items-center text-center gap-3">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="shrink-0" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
                        <span class="text-xs font-semibold text-success uppercase tracking-wider">Included</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"/><path d="m18 15-2-2"/><path d="m15 18-2-2"/></svg>
                    <h3 class="card-title text-lg">Support PlatPursuit</h3>
                    <p class="text-sm text-base-content/70">Your subscription directly funds development, new features, and server costs.</p>
                </div>
            </div>

        </div>
    </div>

    {% else %}
    <!-- ===== NO SUBSCRIPTION: Simple CTA ===== -->
    <div class="flex justify-center">
        <div class="card card-interactive bg-base-200/60 w-full max-w-lg">
            <div class="card-body items-center text-center gap-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                <h2 class="card-title text-2xl">No Active Subscription</h2>
                <p class="text-base-content/70">You don't have an active subscription yet. Unlock faster syncing, profile customization, and more.</p>
                <a href="{% url 'subscribe' %}" class="btn btn-primary btn-wide gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    Subscribe Now
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- ===== SECTION 4: Trust / Community ===== -->
    <div class="text-center space-y-2 text-sm text-base-content/60 italic max-w-2xl mx-auto">
        <p>Built by trophy hunters, for trophy hunters. PlatPursuit is an independent project, and your support keeps us building and improving.</p>
    </div>

</div>
{% endblock %}

{% block js_scripts %}
<script>
    PlatPursuit.ZoomScaler.init();
</script>
{% endblock %}
