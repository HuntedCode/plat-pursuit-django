@import "tailwindcss";
@plugin "daisyui";

@theme {
  --color-trophy-bronze: #8d4d2a;
  --color-trophy-silver: #5f5f5f;
  --color-trophy-gold: #927143;
  --color-trophy-platinum: #67d1f8;
}

@plugin "daisyui" {
  themes: plat-pursuit-dark --default --prefersdark;
}

@plugin "daisyui/theme" {
  name: "plat-pursuit-dark";
  default: true;
  prefersdark: true;
  color-scheme: "dark";
  --color-base-100: oklch(0.28 0.016 252.4);
  --color-base-200: oklch(23.26% 0.014 253.1);
  --color-base-300: oklch(21.15% 0.012 254.09);
  --color-base-content: oklch(97.807% 0.029 256.847);
  --color-primary: oklch(86.078% 0.142 206.182);
  --color-primary-content: oklch(17.226% 0.028 139.549);
  --color-secondary: oklch(0.741 0.233 277.1);
  --color-secondary-content: oklch(17.226% 0.028 139.549);
  --color-accent: oklch(0.815 0.195 35.4);
  --color-accent-content: oklch(17.226% 0.028 139.549);
  --color-neutral: oklch(14% 0.005 285.823);
  --color-neutral-content: oklch(92% 0.004 286.32);
  --color-info: oklch(0.735 0.274 257.3);
  --color-info-content: oklch(17.226% 0.028 139.549);
  --color-success: oklch(86.171% 0.142 166.534);
  --color-success-content: oklch(17.226% 0.028 139.549);
  --color-warning: oklch(0.946 0.186 94.8);
  --color-warning-content: oklch(17.226% 0.028 139.549);
  --color-error: oklch(0.759 0.24 19.2);
  --color-error-content: oklch(17.226% 0.028 139.549);
  --radius-selector: 0.25rem;
  --radius-field: 0.25rem;
  --radius-box: 0.25rem;
  --size-selector: 0.25rem;
  --size-field: 0.25rem;
  --border: 2px;
  --depth: 1;
  --noise: 0;
}

@plugin "daisyui/theme" {
  name: "plat-pursuit-light";
  color-scheme: "light";
  --color-base-100: oklch(98% 0.01 252);
  --color-base-200: oklch(94% 0.012 253);
  --color-base-300: oklch(90% 0.014 254);
  --color-base-content: oklch(25% 0.02 256);
  --color-primary: oklch(55% 0.2 206);
  --color-primary-content: oklch(98% 0.01 206);
  --color-secondary: oklch(50% 0.25 277);
  --color-secondary-content: oklch(98% 0.01 277);
  --color-accent: oklch(55% 0.2 35);
  --color-accent-content: oklch(98% 0.01 35);
  --color-neutral: oklch(30% 0.01 286);
  --color-neutral-content: oklch(95% 0.005 286);
  --color-info: oklch(50% 0.25 257);
  --color-info-content: oklch(98% 0.01 257);
  --color-success: oklch(55% 0.2 166);
  --color-success-content: oklch(98% 0.01 166);
  --color-warning: oklch(65% 0.2 95);
  --color-warning-content: oklch(20% 0.02 95);
  --color-error: oklch(55% 0.25 19);
  --color-error-content: oklch(98% 0.01 19);
  --radius-selector: 0.25rem;
  --radius-field: 0.25rem;
  --radius-box: 0.25rem;
  --size-selector: 0.25rem;
  --size-field: 0.25rem;
  --border: 2px;
  --depth: 1;
  --noise: 0;
}

@layer base {
  body {
    font-family: "Inter", ui-sans-serif, system-ui, sans-serif;
  }
  [data-theme="plat-pursuit-light"] body {
    background-color: oklch(75% 0.01 252) !important;
  }
  [data-theme="plat-pursuit-light"] .grayscale {
    filter: grayscale(100%) brightness(0.7) !important;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "Inter", ui-sans-serif, system-ui, sans-serif;
  }
  .font-logo {
    font-family: "Futura", "Inter", ui-sans-serif, system-ui, sans-serif;
  }
  .card {
    @apply shadow-lg shadow-base-300 border-2 border-base-300;
  }

  /* Zoom Scaling System - Uniform sub-768px scaling via transform: scale()
     Activated per-page by adding .zoom-active to #zoom-container via JS (PlatPursuit.ZoomScaler.init())
     See CLAUDE.md "Responsive Design Standards" for full documentation */
  @media (max-width: 767px) {
    #zoom-container.zoom-active {
      overflow: hidden;
    }
    #zoom-container.zoom-active #zoom-wrapper {
      transform-origin: top left;
    }
  }
  @media (max-width: 359px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.42); width: calc(100% / 0.42); }
  }
  @media (min-width: 360px) and (max-width: 389px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.47); width: calc(100% / 0.47); }
  }
  @media (min-width: 390px) and (max-width: 419px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.51); width: calc(100% / 0.51); }
  }
  @media (min-width: 420px) and (max-width: 479px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.55); width: calc(100% / 0.55); }
  }
  @media (min-width: 480px) and (max-width: 539px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.63); width: calc(100% / 0.63); }
  }
  @media (min-width: 540px) and (max-width: 599px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.70); width: calc(100% / 0.70); }
  }
  @media (min-width: 600px) and (max-width: 639px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.78); width: calc(100% / 0.78); }
  }
  @media (min-width: 640px) and (max-width: 719px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.83); width: calc(100% / 0.83); }
  }
  @media (min-width: 720px) and (max-width: 767px) {
    #zoom-container.zoom-active #zoom-wrapper { transform: scale(0.94); width: calc(100% / 0.94); }
  }
  /* Prevent Tailwind container margin jump in the 640px-768px range when scaling is active */
  @media (min-width: 640px) and (max-width: 767px) {
    #zoom-container.zoom-active .container {
      max-width: 100% !important;
      padding-left: 1rem !important;
      padding-right: 1rem !important;
    }
  }

  .card-img-container {
    @apply border-2 border-base-300 group-hover:scale-105 group-focus-within:scale-105 hover:animate-pulse;
  }

  /* Section container - outer page sections */
  .section-container {
    @apply shadow-lg shadow-neutral bg-base-200/80 rounded-box border-2 border-base-300 p-0 lg:p-4;
  }

  /* Panel container - sidebars, filter panels, split panes */
  .panel-container {
    @apply bg-base-200 rounded-lg shadow-md border-2 border-base-300;
  }

  /* Hotbar loading state - prevents flash of unstyled content */
  .hotbar-loading {
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }

  /* Hotbar toggle pulse when collapsed */
  .hotbar-toggle-pulse {
    animation: hotbar-pulse 2.5s ease-in-out infinite;
  }
  @keyframes hotbar-pulse {
    0%, 100% {
      box-shadow: 0 4px 6px -1px color-mix(in oklch, var(--color-primary) 15%, transparent);
    }
    50% {
      box-shadow: 0 4px 14px -1px color-mix(in oklch, var(--color-primary) 35%, transparent);
    }
  }

  /* Interactive card with standard hover effect */
  .card-interactive {
    @apply transition-all duration-300 cursor-pointer hover:scale-105;
  }

  /* Interactive card hover variants */
  .card-hover-primary {
    @apply hover:border-primary hover:shadow-primary;
  }

  .card-hover-accent {
    @apply hover:border-accent hover:shadow-accent;
  }

  .card-hover-secondary {
    @apply hover:border-secondary hover:shadow-secondary;
  }
  .trophy-card-bronze {
    @apply hover:border-trophy-bronze hover:shadow-trophy-bronze focus-within:border-trophy-bronze focus-within:shadow-trophy-bronze;
  }
  .trophy-card-img-bronze {
    @apply group-hover:border-trophy-bronze group-focus-within:border-trophy-bronze;
  }
  .trophy-card-silver {
    @apply hover:border-trophy-silver hover:shadow-trophy-silver focus-within:border-trophy-silver focus-within:shadow-trophy-silver;
  }
  .trophy-card-img-silver {
    @apply group-hover:border-trophy-silver group-focus-within:border-trophy-silver;
  }
  .trophy-card-gold {
    @apply hover:border-trophy-gold hover:shadow-trophy-gold focus-within:border-trophy-gold focus-within:shadow-trophy-gold;
  }
  .trophy-card-img-gold {
    @apply group-hover:border-trophy-gold group-focus-within:border-trophy-gold;
  }
  .trophy-card-platinum {
    @apply hover:border-trophy-platinum hover:shadow-trophy-platinum focus-within:border-trophy-platinum focus-within:shadow-trophy-platinum;
  }
  .trophy-card-img-platinum {
    @apply group-hover:border-trophy-platinum group-focus-within:border-trophy-platinum;
  }

  /* Trophy badge styles for checklists */
  .badge-bronze {
    background-color: #cd7f32;
    color: white;
    border-color: #8d4d2a;
  }
  .badge-silver {
    background-color: #c0c0c0;
    color: #1a1a1a;
    border-color: #5f5f5f;
  }
  .badge-gold {
    background-color: #ffd700;
    color: #1a1a1a;
    border-color: #927143;
  }
  .badge-platinum {
    background-color: #67d1f8;
    color: #1a1a1a;
    border-color: #2196f3;
  }

  /* Trophy border colors for items */
  .border-bronze {
    border-color: #cd7f32;
  }
  .border-silver {
    border-color: #c0c0c0;
  }
  .border-gold {
    border-color: #ffd700;
  }
  .border-platinum {
    border-color: #67d1f8;
  }

  /* Earned trophy checkbox styling */
  .checklist-trophy-item[data-earned="true"] {
    background-color: oklch(86.171% 0.142 166.534 / 0.1);
  }
  .checklist-trophy-item[data-earned="true"] .checkbox:disabled {
    cursor: not-allowed;
    opacity: 0.9;
  }

  .shimmer {
      position: relative;
      animation: shimmer 3s infinite linear;
  }
  @keyframes shimmer {
      0% { 
        box-shadow: 0 0 10px var(--color-primary);
        border-color: var(--color-primary);
      }
      25% { 
        box-shadow: 0 0 10px var(--color-secondary);
        border-color: var(--color-secondary);
      }
      50% { 
        box-shadow: 0 0 10px var(--color-accent);
        border-color: var(--color-accent);
      }
      75% { 
        box-shadow: 0 0 10px var(--color-warning);
        border-color: var(--color-warning);
      }
      100% { 
        box-shadow: 0 0 10px var(--color-primary);
        border-color: var(--color-primary);
      }
  }
  .progress-pulse {
    animation: progress-pulse 2s ease-in-out infinite;
  }
  @keyframes progress-pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  .shake {
    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
  }
  @keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
  }

  /* ===== Mobile Bottom Tab Bar ===== */
  .mobile-tabbar {
    @apply fixed bottom-0 left-0 right-0 z-40 bg-base-200 border-t-2 border-base-300 shadow-lg;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  .mobile-tabbar-inner {
    @apply flex items-center justify-around h-14;
  }
  .mobile-tabbar-item {
    @apply flex flex-col items-center justify-center gap-0.5 text-xs text-base-content/60 bg-transparent border-none cursor-pointer transition-colors duration-200 px-2 py-1 min-w-0;
  }
  .mobile-tabbar-item:hover,
  .mobile-tabbar-item.active {
    @apply text-primary;
  }
  .mobile-tabbar-item svg {
    @apply w-5 h-5;
  }

  /* ===== Expandable Search Bar ===== */
  .search-expandable {
    max-width: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-width 300ms ease, opacity 300ms ease;
  }
  .search-expandable.active {
    max-width: 320px;
    opacity: 1;
  }
  @media (min-width: 1280px) {
    .search-expandable.active {
      max-width: 400px;
    }
  }

  /* ===== Mega Menu Dropdown Content ===== */
  .mega-menu-content {
    @apply min-w-48 bg-base-100 border-2 border-base-200 shadow-lg p-2;
    z-index: 60;
  }

  /* ===== Mobile More Drawer ===== */
  .more-drawer-backdrop {
    @apply fixed inset-0 bg-black/50 z-40 transition-opacity duration-300;
  }
  .more-drawer-backdrop.hidden {
    opacity: 0;
    pointer-events: none;
  }
  .more-drawer {
    @apply fixed bottom-0 left-0 right-0 z-50 bg-base-200 border-t-2 border-base-300 rounded-t-2xl shadow-2xl;
    max-height: 85vh;
    overflow-y: auto;
    transform: translateY(100%);
    transition: transform 300ms ease;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  .more-drawer.open {
    transform: translateY(0);
  }
  .more-drawer-handle {
    @apply w-10 h-1 bg-base-content/30 rounded-full mx-auto mt-3 mb-2;
  }
  .more-drawer-section-title {
    @apply text-xs uppercase tracking-wider text-base-content/50 font-bold px-4 pt-4 pb-1;
  }

  /* ===== Mobile Search Overlay ===== */
  .mobile-search-overlay {
    @apply fixed top-0 left-0 right-0 z-50 bg-base-200 border-b-2 border-base-300 shadow-lg p-3;
    transform: translateY(-100%);
    transition: transform 300ms ease;
  }
  .mobile-search-overlay.open {
    transform: translateY(0);
  }

  /* Bottom padding on mobile to prevent content behind tab bar */
  @media (max-width: 1023px) {
    #zoom-wrapper {
      padding-bottom: 3.5rem;
    }
  }
}

/* ===== Modal Backdrop Blur ===== */
.modal[open] {
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}

.legendary-title {
  font-family: 'Montserrat', sans-serif; /* e.g., Montserrat for epic feel */
  font-weight: 700;
  background: linear-gradient(
    90deg,
    #ff4500 0%,
    #ffd700 25%,
    #ff4500 50%,
    #ffd700 75%,
    #ff4500 100%
  );
  background-size: var(--shimmer-size) 100%;
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  text-shadow:
    0 0 1px rgba(255, 255, 255, 0.4),
    0 0 2px #ff3,
    0 0 4px #f90,
    0 0 6px #c33;
}

/* Premium-locked month button hover effect for recap calendar */
.premium-locked:hover {
  cursor: not-allowed;
  opacity: 0.7;
}

.premium-locked.btn-ghost {
  background-color: rgba(255, 193, 7, 0.1);
  border: 1px dashed rgba(255, 193, 7, 0.5);
}

/* Extend DaisyUI text-rotate to support 7-10 items */
.text-rotate > *:has(:nth-child(7)) {
  --items: 7;
  animation: rotator var(--duration, 10s) linear(0 0% 13%, 0.142857 14% 27%, 0.285714 28% 41%, 0.428571 42% 55%, 0.571429 56% 70%, 0.714286 71% 84%, 0.857143 85% 99%, 1 100% 100%) infinite;
}
.text-rotate > *:has(:nth-child(8)) {
  --items: 8;
  animation: rotator var(--duration, 10s) linear(0 0% 11%, 0.125 12% 23%, 0.25 24% 36%, 0.375 37% 49%, 0.5 50% 61%, 0.625 62% 74%, 0.75 75% 86%, 0.875 87% 99%, 1 100% 100%) infinite;
}
.text-rotate > *:has(:nth-child(9)) {
  --items: 9;
  animation: rotator var(--duration, 10s) linear(0 0% 10%, 0.111111 11% 21%, 0.222222 22% 32%, 0.333333 33% 43%, 0.444444 44% 54%, 0.555556 55% 65%, 0.666667 66% 76%, 0.777778 77% 87%, 0.888889 88% 99%, 1 100% 100%) infinite;
}
.text-rotate > *:has(:nth-child(10)) {
  --items: 10;
  animation: rotator var(--duration, 10s) linear(0 0% 9%, 0.1 10% 19%, 0.2 20% 29%, 0.3 30% 39%, 0.4 40% 49%, 0.5 50% 59%, 0.6 60% 69%, 0.7 70% 79%, 0.8 80% 89%, 0.9 90% 99%, 1 100% 100%) infinite;
}

/* ===== Mega Menu with Sections (My Pursuit) ===== */
.mega-menu-content .menu-title {
  @apply text-xs uppercase tracking-wider text-base-content/50 font-bold px-2 pt-2 pb-1;
}

.mega-menu-content .menu-title:first-child {
  @apply pt-0;
}

.mega-menu-content .divider {
  @apply my-1;
}

/* Wider mega menu for My Pursuit to accommodate sections */
.mega-menu-sectioned {
  @apply min-w-64;
}

/* Ensure badge indicators are visible on mega menu summaries */
.mega-menu-dropdown summary .badge {
  @apply ml-1;
}

/* ==========================================
   Checklist Edit Page - Visual Design System
   ========================================== */

/* Item Type Color Coding */
.checklist-item-edit[data-item-type="item"],
.checklist-item[data-item-type="item"] {
  @apply border-l-4 border-l-base-300;
}

.checklist-item-edit[data-item-type="sub_header"],
.checklist-item[data-item-type="sub_header"] {
  @apply border-l-4 border-l-secondary bg-secondary/5;
}

.checklist-trophy-item[data-item-type="trophy"],
.checklist-item[data-item-type="trophy"] {
  @apply border-l-4 border-l-warning bg-warning/5;
}

.checklist-item-edit[data-item-type="image"],
.checklist-item[data-item-type="image"] {
  @apply border-l-4 border-l-info bg-info/5;
}

.checklist-item-edit[data-item-type="text_area"],
.checklist-text-area-edit[data-item-type="text_area"],
.checklist-item[data-item-type="text_area"] {
  @apply border-l-4 border-l-accent bg-accent/5;
}

/* Character Limit Color Coding */
.char-counter-safe {
  @apply text-base-content/50;
}

.char-counter-warning {
  @apply text-warning font-medium;
}

.char-counter-danger {
  @apply text-error font-bold;
}

/* Drag Handles */
.item-drag-handle,
[class*="drag-handle"] {
  @apply cursor-grab opacity-40 hover:opacity-100 transition-opacity;
}

.item-drag-handle:active,
[class*="drag-handle"]:active {
  @apply cursor-grabbing;
}

.checklist-item-edit.dragging,
.checklist-trophy-item.dragging {
  @apply opacity-50 shadow-xl ring-2 ring-primary;
}

/* Section Cards - Collapsed/Expanded States */
.checklist-section .card {
  @apply transition-all duration-200;
}

.section-items-content {
  @apply transition-all duration-300 ease-in-out overflow-hidden;
}

/* Micro-Interactions */
@keyframes flash-success {
  0%, 100% {
    background-color: transparent;
  }
  50% {
    background-color: oklch(86.171% 0.142 166.534 / 0.2);
  }
}

@keyframes flash-error {
  0%, 100% {
    background-color: transparent;
  }
  50% {
    background-color: oklch(0.759 0.24 19.2 / 0.2);
  }
}

.flash-success {
  animation: flash-success 1s ease-in-out;
}

.flash-error {
  animation: flash-error 1s ease-in-out;
}

/* Smooth Scrolling */
html {
  scroll-behavior: smooth;
}

/* Unified Item Creator */
[id^="item-creator-"] {
  @apply transition-all duration-200;
}

/* Trophy Modal Batch Selection */
.trophy-card.selected {
  @apply ring-2 ring-warning bg-warning/10;
}

/* Section Toggle Icon Rotation */
.section-toggle-icon {
  @apply transition-transform duration-200;
}

/* Checklist Items Hover States */
.checklist-item-edit:hover,
.checklist-trophy-item:hover,
.checklist-text-area-edit:hover {
  @apply shadow-sm;
}

/* Empty State Styling */
.empty-items-message {
  @apply text-base-content/50 italic text-center py-4;
}

/* Easter Egg: Platinum Trophy Rain (Konami Code) */
@keyframes plat-rain {
  0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
  80% { opacity: 1; }
  100% { transform: translateY(calc(100vh + 100px)) rotate(720deg); opacity: 0; }
}

.plat-rain-drop {
  position: fixed;
  top: 0;
  z-index: 9999;
  pointer-events: none;
  width: 48px;
  height: 48px;
  animation: plat-rain 3s ease-in forwards;
}

/* Easter Egg: Logo Spin (Footer) */
@keyframes logo-spin {
  0% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(180deg) scale(1.3); }
  50% { transform: rotate(360deg) scale(1); }
  75% { transform: rotate(540deg) scale(1.3); }
  100% { transform: rotate(720deg) scale(1); }
}

.logo-spin-active {
  animation: logo-spin 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  cursor: pointer;
}

/* ─── Pick My Next Game Spinner ──────────────────────────────────────────── */

@keyframes spinner-fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-spinner-fade-in {
  animation: spinner-fade-in 0.4s ease-out forwards;
}

@keyframes spinner-winner-pulse {
  0%, 100% { box-shadow: 0 0 12px color-mix(in oklch, var(--color-primary) 30%, transparent); }
  50% { box-shadow: 0 0 24px color-mix(in oklch, var(--color-primary) 60%, transparent); }
}

.spinner-winner-glow {
  animation: spinner-winner-pulse 1.5s ease-in-out infinite;
}

@keyframes spinner-grid-pulse {
  0%, 100% { box-shadow: 0 0 0 0 transparent; }
  50% { box-shadow: 0 0 16px 4px color-mix(in oklch, var(--color-secondary) 50%, transparent); }
}

.spinner-grid-highlight {
  animation: spinner-grid-pulse 0.8s ease-in-out 3;
}

@keyframes spinner-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

.animate-spinner-fade-out {
  animation: spinner-fade-out 0.4s ease-in forwards;
}

/* ─── Knife Easter Egg ───────────────────────────────────────────────────── */

@keyframes spinner-knife-shimmer {
  0%, 100% { box-shadow: 0 0 8px color-mix(in oklch, var(--color-warning) 40%, transparent); }
  50% { box-shadow: 0 0 16px color-mix(in oklch, var(--color-warning) 70%, transparent); }
}

.spinner-tile-knife {
  border-color: color-mix(in oklch, var(--color-warning) 60%, transparent);
  animation: spinner-knife-shimmer 1.2s ease-in-out infinite;
}
